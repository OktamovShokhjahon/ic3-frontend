(()=>{var e={};e.id=615,e.ids=[615],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},3444:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=s(482),l=s(9108),a=s(2563),n=s.n(a),i=s(8300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["test",{children:["[level]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3143)),"C:\\Users\\admin\\Desktop\\ic3-send\\frontend\\src\\app\\test\\[level]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8777)),"C:\\Users\\admin\\Desktop\\ic3-send\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\admin\\Desktop\\ic3-send\\frontend\\src\\app\\test\\[level]\\page.tsx"],u="/test/[level]/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/test/[level]/page",pathname:"/test/[level]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2061:(e,t,s)=>{Promise.resolve().then(s.bind(s,2674))},2674:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(2295),l=s(3729),a=s(2254),n=s(6548);function i({params:e}){let[t,s]=(0,l.useState)(null),[i,o]=(0,l.useState)([]),[d,c]=(0,l.useState)(null),[u,x]=(0,l.useState)([]),[m,p]=(0,l.useState)(0),[h,g]=(0,l.useState)(!0),[f,b]=(0,l.useState)(!1),[v,y]=(0,l.useState)(0),[w,N]=(0,l.useState)(null),[j,q]=(0,l.useState)(!1),[k,S]=(0,l.useState)(0),[$,C]=(0,l.useState)(null),E=(0,a.useRouter)();(0,l.useEffect)(()=>{_()},[]),(0,l.useEffect)(()=>{if(f&&v>0){let e=setTimeout(()=>y(v-1),1e3);return()=>clearTimeout(e)}0===v&&f&&A()},[v,f]),(0,l.useEffect)(()=>{let e=()=>{f&&document.hidden&&(S(e=>e+1),k>=2&&A())},t=()=>{f&&(S(e=>e+1),k>=2&&A())},s=e=>(e.preventDefault(),!1),r=e=>(e.preventDefault(),!1),l=e=>{if(e.ctrlKey&&("c"===e.key||"v"===e.key||"x"===e.key)||"F12"===e.key||e.ctrlKey&&e.shiftKey&&"I"===e.key)return e.preventDefault(),!1};return f&&(document.addEventListener("visibilitychange",e),window.addEventListener("blur",t),document.addEventListener("contextmenu",s),document.addEventListener("copy",r),document.addEventListener("keydown",l)),()=>{document.removeEventListener("visibilitychange",e),window.removeEventListener("blur",t),document.removeEventListener("contextmenu",s),document.removeEventListener("copy",r),document.removeEventListener("keydown",l)}},[f,k]);let _=async()=>{try{let e=await n.Z.get("/auth/me");s(e.data.user)}catch(e){E.push("/login")}finally{g(!1)}},L=async()=>{try{let e=document.documentElement;e.requestFullscreen?await e.requestFullscreen():e.webkitRequestFullscreen?await e.webkitRequestFullscreen():e.msRequestFullscreen&&await e.msRequestFullscreen(),q(!0)}catch(e){console.error("Fullscreen request failed:",e)}},P=async t=>{try{if(await L(),"1"===e.level&&"1-45"===t){C("/lvl-1-1/index.html"),c(t),b(!0),N(Date.now()),y(2700);return}if("1"===e.level&&"46-90"===t){C("/lvl-1-2/index.html"),c(t),b(!0),N(Date.now()),y(2700);return}let s=await n.Z.get(`/tests/questions/${e.level}/${t}`);o(s.data.questions),c(t),x(Array(s.data.questions.length).fill(-1)),b(!0),N(Date.now());let r="full"===t?5400:2700;y(r)}catch(e){console.error("Failed to load questions:",e)}},F=(e,t)=>{let s=[...u];s[e]=t,x(s)},A=async()=>{if(!w||!d)return;let t=Math.floor((Date.now()-w)/1e3);try{let s=await n.Z.post("/tests/submit",{level:parseInt(e.level),type:d,questionIds:i.map(e=>e._id),answers:u,timeSpent:t});E.push(`/results?data=${encodeURIComponent(JSON.stringify(s.data.result))}`)}catch(e){console.error("Failed to submit test:",e)}};if(h)return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:r.jsx("div",{className:"text-white",children:"Loading..."})});if(!t)return null;if(!f)return(0,r.jsxs)("div",{className:"relative min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:[t&&r.jsx("div",{className:"pointer-events-none select-none fixed inset-0 opacity-25 z-50",children:r.jsx("div",{className:"relative w-full h-full",children:Array.from({length:5}).map((e,s)=>Array.from({length:5}).map((e,l)=>(0,r.jsxs)("div",{className:"absolute text-2xl md:text-3xl font-semibold tracking-wide text-gray-700 whitespace-nowrap",style:{top:`${10+20*s}%`,left:`${10+20*l}%`,transform:"translate(-50%, -50%) rotate(-20deg)"},children:[t.passportFullName??t.username," \xb7 ",t.passportNumber??"N/A"]},`${s}-${l}`)))})}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-2xl backdrop-blur-lg bg-opacity-95",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:["Level ",e.level," Test"]}),r.jsx("p",{className:"text-gray-600",children:"Choose your test type"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{type:"1-45",label:"Questions 1-45",desc:"First half of the test"},{type:"46-90",label:"Questions 46-90",desc:"Second half of the test"},{type:"full",label:"Full Practice",desc:"All 90 questions"}].map(e=>(0,r.jsxs)("button",{onClick:()=>P(e.type),className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-6 rounded-xl hover:from-blue-600 hover:to-indigo-700 transition transform hover:scale-105",children:[r.jsx("h3",{className:"text-xl font-bold mb-2",children:e.label}),r.jsx("p",{className:"text-sm opacity-90",children:e.desc})]},e.type))}),r.jsx("div",{className:"mt-8 text-center",children:r.jsx("button",{onClick:()=>E.push("/dashboard"),className:"text-gray-600 hover:text-gray-800 transition",children:"← Back to Dashboard"})})]})]});if($){let s="1-45"===d?"Questions 1–45":"46-90"===d?"Questions 46–90":"Legacy Test";return(0,r.jsxs)("div",{className:"relative min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-0",children:[t&&r.jsx("div",{className:"pointer-events-none select-none fixed inset-0 opacity-25 z-50",children:r.jsx("div",{className:"relative w-full h-full",children:Array.from({length:5}).map((e,s)=>Array.from({length:5}).map((e,l)=>(0,r.jsxs)("div",{className:"absolute text-2xl md:text-3xl font-semibold tracking-wide text-gray-700 whitespace-nowrap",style:{top:`${10+20*s}%`,left:`${10+20*l}%`,transform:"translate(-50%, -50%) rotate(-20deg)"},children:[t.passportFullName??t.username," \xb7 ",t.passportNumber??"N/A"]},`${s}-${l}`)))})}),(0,r.jsxs)("div",{className:"relative z-10 h-screen flex flex-col",children:[(0,r.jsxs)("div",{className:"bg-white rounded-b-2xl shadow-lg p-4 flex justify-between items-center",children:[r.jsx("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)("span",{className:"text-lg font-semibold",children:["Level ",e.level," – IC3 GS6 (",s,")"]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"text-lg font-mono",children:[Math.floor(v/60),":",(v%60).toString().padStart(2,"0")]}),r.jsx("button",{onClick:async()=>{if(!w){E.push("/dashboard");return}let t=Math.floor((Date.now()-w)/1e3);try{let s=await n.Z.post("/tests/legacy-complete",{level:parseInt(e.level,10),type:d??"1-45",timeSpent:t});E.push(`/results?data=${encodeURIComponent(JSON.stringify(s.data.result))}`)}catch(e){console.error("Failed to record legacy test result:",e),E.push("/dashboard")}},className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition",children:"Exit"})]})]}),r.jsx("div",{className:"flex-1",children:r.jsx("iframe",{src:$,className:"w-full h-full border-0",title:"IC3 GS6 Level 1 Test",sandbox:"allow-scripts allow-same-origin allow-forms"})})]})]})}let D=i[m];return(0,r.jsxs)("div",{className:"relative min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:[t&&r.jsx("div",{className:"pointer-events-none select-none fixed inset-0 opacity-25 z-50",children:r.jsx("div",{className:"relative w-full h-full",children:Array.from({length:5}).map((e,s)=>Array.from({length:5}).map((e,l)=>(0,r.jsxs)("div",{className:"absolute text-xl md:text-2xl font-semibold tracking-wide text-gray-700 whitespace-nowrap",style:{top:`${10+20*s}%`,left:`${10+20*l}%`,transform:"translate(-50%, -50%) rotate(-20deg)"},children:[t.passportFullName??t.username," \xb7 ",t.passportNumber??"N/A"]},`${s}-${l}`)))})}),k>0&&(0,r.jsxs)("div",{className:"bg-red-500 text-white p-4 text-center",children:["⚠️ Warning ",k,"/3: Do not switch tabs or leave fullscreen! Test will be auto-submitted."]}),(0,r.jsxs)("div",{className:"bg-white rounded-t-2xl shadow-lg p-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("span",{className:"text-lg font-semibold",children:["Question ",m+1,"/",i.length]}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["Level ",e.level," - ",d]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"text-lg font-mono",children:[Math.floor(v/60),":",(v%60).toString().padStart(2,"0")]}),r.jsx("button",{onClick:A,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition",children:"Submit Test"})]})]}),r.jsx("div",{className:"mt-4 bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${(m+1)/i.length*100}%`}})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:D.question}),r.jsx("div",{className:"space-y-4",children:D.options.map((e,t)=>r.jsx("button",{onClick:()=>F(m,t),className:`w-full text-left p-4 rounded-lg border-2 transition ${u[m]===t?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-6 h-6 rounded-full border-2 mr-3 flex items-center justify-center ${u[m]===t?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:u[m]===t&&r.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})}),r.jsx("span",{className:"text-lg",children:e})]})},t))})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("button",{onClick:()=>p(Math.max(0,m-1)),disabled:0===m,className:"bg-gray-500 hover:bg-gray-600 disabled:bg-gray-300 text-white px-6 py-2 rounded-lg transition",children:"Previous"}),r.jsx("div",{className:"flex space-x-2",children:i.map((e,t)=>r.jsx("button",{onClick:()=>p(t),className:`w-8 h-8 rounded-full text-sm ${-1!==u[t]?"bg-green-500 text-white":m===t?"bg-blue-500 text-white":"bg-gray-200 text-gray-600"}`,children:t+1},t))}),r.jsx("button",{onClick:()=>p(Math.min(i.length-1,m+1)),disabled:m===i.length-1,className:"bg-gray-500 hover:bg-gray-600 disabled:bg-gray-300 text-white px-6 py-2 rounded-lg transition",children:"Next"})]})})]})}},6548:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});let r=s(1934).Z.create({baseURL:"http://77.83.206.105:5000/api",withCredentials:!0});r.interceptors.request.use(e=>e);let l=r},3143:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>a,__esModule:()=>l,default:()=>n});let r=(0,s(6843).createProxy)(String.raw`C:\Users\admin\Desktop\ic3-send\frontend\src\app\test\[level]\page.tsx`),{__esModule:l,$$typeof:a}=r,n=r.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[974,42,736],()=>s(3444));module.exports=r})();